<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" name="viewport"/>
    <title>iCal</title>
    <link rel="stylesheet" href="../resources/css/fore.css"/>
 

<!--    <script type="module" src="http://localhost:8090/index.js"></script>-->
    <script type="module" src="../resources/script/fore-dev.js"/>
</head>
<body>
<div class="wrapper">
    <!-- for accessability adding a 'role' and 'title' to make it a landmark -->
    <fx-fore xmlns:fhir="http://hl7.org/fhir" id="ical" title="ical app" role="form">
      <fx-model> 
      
        <fx-action event="ready" target="#document">
            <fx-send submission="s-load-names"/>
        </fx-action>
        
        <fx-instance id="default">
            <data user="">
                <selected>cal-u-pmh</selected>
                <today>2024-07-22</today>
            </data>
        </fx-instance>
            
        <fx-instance id="i-provider-list" type="json">
            {}
        </fx-instance>
        <fx-submission id="s-load-names" url="http://localhost:8080/exist/apps/nonfhir/ICal?_elements=id,actor&amp;active=true" method="get" replace="instance" instance="i-provider-list" validate="false">
                <fx-header name="Accept">application/json</fx-header>
                <fx-header name="Content-Type">application/json</fx-header>
                <fx-message event="submit-error">could not load ical owners</fx-message>
                <fx-message event="submit-done">ical owners loaded</fx-message>
        </fx-submission>
      </fx-model>
        
              <div class="wrapit">
                <fx-control id="provider" ref="./selected" update-event="change">
                    <label>Erbringer</label>
                    <select class="widget" ref="instance('i-provider-list')//fhir:ICal">
                        <template>
                            <option value="{./fhir:id/@value}">{./fhir:id/@value}</option>
                        </template>
                    </select>
                </fx-control>
              </div>

    </fx-fore>
</div>
</body>
</html>